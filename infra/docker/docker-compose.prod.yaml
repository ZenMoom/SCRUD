# 운영 환경 사용할 도커 컴포즈 파일

services:
  spring:
    platform: linux/amd64
    image: wnsgh712/s12p21e107-spring:latest
    env_file: ./infra/env/.env.production
    restart: unless-stopped
    networks:
      - scrud-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]
      interval: 5s
      timeout: 5s
      retries: 3
      start_period: 20s

  next:
    platform: linux/amd64
    restart: unless-stopped
    image: wnsgh712/s12p21e107-next:latest
    networks:
      - scrud-network
  
networks:
  scrud-network:
    external: true
